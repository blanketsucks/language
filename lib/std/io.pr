$include "libc/include.pr"

$define _NAMESPACE_STD namespace std {
$define _NAMESPACE_STD_END }

_NAMESPACE_STD

namespace io {

struct WriteStream {
    stream: FILE*;

    func from_fd(fd: int) -> WriteStream {
        return WriteStream {
            stream: libc::fdopen(fd, "w")
        };
    }

    func write(self, buffer: str) -> int {
        return libc::fprintf(self.stream, buffer);
    }
}

func stdout() -> WriteStream {
    return WriteStream::from_fd(1);
}


}

_NAMESPACE_STD_END
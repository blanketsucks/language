import libc;

struct Writer {
    private handle: i32*;

    func new(handle: i32*) -> Writer {
        return Writer { handle };
    }

    func fileno(self) -> i32 {
        return libc::fileno(self.handle);
    }

    func write(self, buffer: i8*) -> i32 {
        return libc::fwrite(buffer, 1, libc::strlen(buffer), self.handle);
    }
}

func stdout() -> Writer {
    return Writer::new(libc::fdopen(1, "w"));
}